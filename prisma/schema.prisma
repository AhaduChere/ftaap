generator client {
  provider = "prisma-client-js"
  output   = "../app/generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Admin {
  admin_id                 BigInt   @id @default(autoincrement())
  teacher_id               BigInt?
  student_id               BigInt
  user_id                  String?  @db.Uuid
  Student                  Student  @relation(fields: [student_id], references: [student_id], onDelete: SetNull)
  Teacher                  Teacher? @relation(fields: [teacher_id], references: [teacher_id])
  User_Admin_user_idToUser User?    @relation("Admin_user_idToUser", fields: [user_id], references: [user_id], onDelete: Cascade)
  User                     User[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Role {
  role_id   Int    @id @default(autoincrement())
  role_name String @default("") @db.VarChar
  User      User[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Student {
  student_id                          BigInt              @id @default(autoincrement())
  teacher_id                          BigInt
  student_score_id                    BigInt?
  student_attendance_id               BigInt?
  student_fname                       String?             @default("") @db.VarChar
  student_lname                       String?             @default("") @db.VarChar
  student_program                     String?             @db.VarChar
  student_grade_level                 BigInt?
  is_archived                         Boolean?
  Admin                               Admin[]
  Student_Attendance                  Student_Attendance? @relation(fields: [student_attendance_id], references: [student_attendance_id])
  Student_Score                       Student_Score?      @relation(fields: [student_score_id], references: [student_score_id])
  Teacher_Student_teacher_idToTeacher Teacher             @relation("Student_teacher_idToTeacher", fields: [teacher_id], references: [teacher_id], onDelete: NoAction, onUpdate: NoAction)
  Teacher_Teacher_student_idToStudent Teacher[]           @relation("Teacher_student_idToStudent")
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Student_Attendance {
  student_attendance_id BigInt    @id @default(autoincrement())
  student_attended      Boolean
  inserted_date         DateTime? @db.Date
  Student               Student[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Student_Score {
  student_score_id            BigInt    @id @default(autoincrement())
  student_dibel_score         Float
  student_dibel_ORF           Float?
  student_dibel_MAZE          Float?
  student_fluency_score       Float?
  student_comprehension_score Float?
  student_vocab_score         Float?
  inserted_date               DateTime? @db.Date
  Student                     Student[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model Teacher {
  teacher_id                          BigInt    @id @default(autoincrement())
  student_id                          BigInt?
  teacher_fname                       String    @default("") @db.VarChar
  teacher_lname                       String?   @default("") @db.VarChar
  user_id                             String?   @db.Uuid
  Admin                               Admin[]
  Student_Student_teacher_idToTeacher Student[] @relation("Student_teacher_idToTeacher")
  Student_Teacher_student_idToStudent Student?  @relation("Teacher_student_idToStudent", fields: [student_id], references: [student_id])
  User_Teacher_user_idToUser          User?     @relation("Teacher_user_idToUser", fields: [user_id], references: [user_id], onDelete: Cascade)
  User                                User[]
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model User {
  user_id                       String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  role_id                       Int
  teacher_id                    BigInt?
  admin_id                      BigInt?
  email                         String?   @default("") @db.VarChar
  encrypted_password            String?   @default("") @db.VarChar
  username                      String?   @default("") @db.VarChar
  Admin_Admin_user_idToUser     Admin[]   @relation("Admin_user_idToUser")
  Teacher_Teacher_user_idToUser Teacher[] @relation("Teacher_user_idToUser")
  Admin                         Admin?    @relation(fields: [admin_id], references: [admin_id])
  Role                          Role      @relation(fields: [role_id], references: [role_id], onDelete: SetNull)
  Teacher                       Teacher?  @relation(fields: [teacher_id], references: [teacher_id])
}
